
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>An Example Investigation &#8212; Data Science in Practice</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="The Basics of Tabular Data" href="../02/introduction.html" />
    <link rel="prev" title="Models and the Scientific Method" href="scientific-method.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/toolbox.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Data Science in Practice</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction.html">
   Data Science in Practice
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Section 1: Understanding Data
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="introduction.html">
   1. Introduction to Data Science
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="what-is-data-science.html">
     1.1. What is Data Science?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="scientific-method.html">
     1.2. The Scientific Method
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     1.3. A Data Science Example
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02/introduction.html">
   2. Tabular Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/tabular-data.html">
     2.1. Introduction to Tabular Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/methods.html">
     2.2. DataFrame Methods
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/data-types.html">
     2.3. Data Types and Performance
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03/introduction.html">
   3. Querying and Describing Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/selecting-data.html">
     3.1. Selecting Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/kinds-of-data.html">
     3.2. Kinds of Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/categorical-distributions.html">
     3.3. Categorical Distributions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/quantitative-distributions.html">
     3.4. Quantitative Distributions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../04/introduction.html">
   4. Understanding Assumptions and Data Cleaning
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/modifying-dataframes.html">
     4.1. Modifying DataFrames
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/cleaning.html">
     4.2. Cleaning Messy Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/eda.html">
     4.3. Exploratory Data Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/asking-questions.html">
     4.4. Hypothesis Testing
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05/introduction.html">
   5. Aggregation and Extension of Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/grouping.html">
     5.1. Data Granularity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/understanding-aggregations.html">
     5.2. Understanding Aggregations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/appending-data.html">
     5.3. Combining Data (Observations)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/joining-data.html">
     5.4. Combining Data (Attributes)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/permutation-tests.html">
     5.5. Permutation Tests
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/eda-2.html">
     5.6. Exploratory Data Analysis II
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../06/introduction.html">
   6. Missing Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/defining-missing.html">
     6.1. Definitions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/identifying-missing.html">
     6.2. Identifying Missing Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/handling-missing-data.html">
     6.3. Handling Missing Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/single-valued-imputation.html">
     6.4. Single-Valued Imputation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/probabilistic-imputation.html">
     6.5. Probabilistic Imputation
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Section 2: Collecting Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../07/introduction.html">
   7. Data Collection
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/existing-data.html">
     7.1. Using Existing Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/requests.html">
     7.2. HTTP Requests
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/html.html">
     7.3. Parsing HTML
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../08/introduction.html">
   8. Information Extaction
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/patterns.html">
     8.1. Text Processing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/nlp.html">
     8.2. Natural Language Processing
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../09/introduction.html">
   9. Introduction to Features
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/features.html">
     9.1. Feature Engineering
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/data-pipelines.html">
     9.2. Data Pipelines
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Section 3: Modeling With Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../10/introduction.html">
   10. Modeling Basics
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/intro-modeling.html">
     10.1. Introduction to Statistical Models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/model-building.html">
     10.2. Building Modeling Pipelines
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../11/introduction.html">
   11. Bias and Variance
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/fitting-inference.html">
     11.1. Model Quality (Inference)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/fitting-prediction.html">
     11.2. Model Quality (Prediction)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/cross-validation.html">
     11.3. Cross Validation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/parameter-search.html">
     11.4. Parameter Search
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../12/introduction.html">
   12. Evaluating Models; Fairness
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../12/eval.html">
     12.1. Evaluation metrics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12/parity.html">
     12.2. Parity Measures
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12/fairness.html">
     12.3. Fairness in Machine Learning
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/01/data-science-example.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/dsc-courses/ds-in-practice/master?urlpath=tree/book/content/01/data-science-example.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#san-diego-city-salaries">
   San Diego City Salaries
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sd-employee-salaries-background-research">
     SD Employee Salaries: background research
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#an-initial-look-what-to-keep-in-mind">
     An initial look: what to keep in mind
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aside-on-privacy-and-ethics">
     Aside on privacy and ethics
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basic-description-of-employee-pay">
     Basic description of employee pay
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#empirical-distribution-of-salaries">
     Empirical Distribution of Salaries
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#do-women-earn-similar-pay-to-their-contemporaries">
     Do women earn similar pay to their contemporaries?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ssa-names-dataset">
     SSA names dataset
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basic-check-of-names">
     Basic check of
     <code class="docutils literal notranslate">
      <span class="pre">
       names
      </span>
     </code>
     :
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#approach-to-joining-gender">
     Approach to joining gender:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-a-given-name-column-to-salaries-and-join-names">
     Add a given name column to
     <code class="docutils literal notranslate">
      <span class="pre">
       salaries
      </span>
     </code>
     and join names
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Do women earn similar pay to their contemporaries?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-a-hypothesis-test">
     Use a hypothesis test
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#truism-of-data-science">
   Truism of data science
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#is-the-dataset-representative">
     Is the dataset representative?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#is-the-name-to-gender-assignment-correct">
     Is the name-to-gender assignment correct?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#assessment-of-the-join">
     Assessment of the join?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-does-pay-disparity-exist">
     Why does pay disparity exist?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-the-cause-of-the-disparity">
     What is the cause of the disparity?
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>An Example Investigation</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#san-diego-city-salaries">
   San Diego City Salaries
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sd-employee-salaries-background-research">
     SD Employee Salaries: background research
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#an-initial-look-what-to-keep-in-mind">
     An initial look: what to keep in mind
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aside-on-privacy-and-ethics">
     Aside on privacy and ethics
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basic-description-of-employee-pay">
     Basic description of employee pay
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#empirical-distribution-of-salaries">
     Empirical Distribution of Salaries
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#do-women-earn-similar-pay-to-their-contemporaries">
     Do women earn similar pay to their contemporaries?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ssa-names-dataset">
     SSA names dataset
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basic-check-of-names">
     Basic check of
     <code class="docutils literal notranslate">
      <span class="pre">
       names
      </span>
     </code>
     :
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#approach-to-joining-gender">
     Approach to joining gender:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-a-given-name-column-to-salaries-and-join-names">
     Add a given name column to
     <code class="docutils literal notranslate">
      <span class="pre">
       salaries
      </span>
     </code>
     and join names
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Do women earn similar pay to their contemporaries?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-a-hypothesis-test">
     Use a hypothesis test
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#truism-of-data-science">
   Truism of data science
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#is-the-dataset-representative">
     Is the dataset representative?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#is-the-name-to-gender-assignment-correct">
     Is the name-to-gender assignment correct?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#assessment-of-the-join">
     Assessment of the join?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-does-pay-disparity-exist">
     Why does pay disparity exist?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-the-cause-of-the-disparity">
     What is the cause of the disparity?
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="an-example-investigation">
<h1>An Example Investigation<a class="headerlink" href="#an-example-investigation" title="Permalink to this headline">¶</a></h1>
<p>This section goes through a data-driven investigation that illustrates common techniques in the Data Scientist’s toolkit: assessing the dataset, formulating a question, joining new data to improve an answer, assessing the applicability of a potential answer beyond the dataset, and due diligence on the validity of each step in the reasoning.</p>
<p>The code in this section is hidden to keep the focus on the data and reasoning. The techniques (and code) used in this section are covered in Part I of this book.</p>
<div class="section" id="san-diego-city-salaries">
<h2>San Diego City Salaries<a class="headerlink" href="#san-diego-city-salaries" title="Permalink to this headline">¶</a></h2>
<p>The dataset at hand includes a list of all San Diego city employee salaries for the year of 2017. This includes employee names and job titles, as well as the components of their total pay during that year.</p>
<div class="section" id="sd-employee-salaries-background-research">
<h3>SD Employee Salaries: background research<a class="headerlink" href="#sd-employee-salaries-background-research" title="Permalink to this headline">¶</a></h3>
<p>Why try to understand this dataset?</p>
<ul class="simple">
<li><p>Such a profile could inform 3rd party workplace programs.</p></li>
<li><p>Journalists might search for salary anomalies.</p></li>
<li><p>Auditors may want actionable advice on fair employment practices.</p></li>
<li><p>Are the earning of these employees fair?</p></li>
</ul>
<p>Before formulating goals and questions, an initial look is useful understand the data by building a profile of San Diego city employees.</p>
</div>
<div class="section" id="an-initial-look-what-to-keep-in-mind">
<h3>An initial look: what to keep in mind<a class="headerlink" href="#an-initial-look-what-to-keep-in-mind" title="Permalink to this headline">¶</a></h3>
<p>The data, along with a brief description, is available from <a class="reference external" href="https://transparentcalifornia.com/salaries/san-diego/">Transparent California</a> salary website.</p>
<p>Some questions to keep in mind while looking at the dataset:</p>
<ul class="simple">
<li><p>What columns are required for potential questions that might be asked?</p></li>
<li><p>Which columns have the relevant information?</p></li>
<li><p>Does that information likely reflect real-life salaries or are there mistakes in the data?</p></li>
<li><p>Are the data in the table self-consistent?</p></li>
</ul>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">salary_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;san-diego-2017.csv&#39;</span><span class="p">)</span>
<span class="n">salaries</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">salary_path</span><span class="p">)</span>
<span class="n">salaries</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Employee Name</th>
      <th>Job Title</th>
      <th>Base Pay</th>
      <th>Overtime Pay</th>
      <th>Other Pay</th>
      <th>Benefits</th>
      <th>Total Pay</th>
      <th>Total Pay &amp; Benefits</th>
      <th>Year</th>
      <th>Notes</th>
      <th>Agency</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>David Xxxx</td>
      <td>Fire Battalion Chief</td>
      <td>81917.0</td>
      <td>172590.0</td>
      <td>68870.00</td>
      <td>5194.0</td>
      <td>323377.0</td>
      <td>328571.0</td>
      <td>2017</td>
      <td>NaN</td>
      <td>San Diego</td>
      <td>FT</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Glen Xxxx</td>
      <td>Fire Captain</td>
      <td>85904.0</td>
      <td>120682.0</td>
      <td>99408.00</td>
      <td>10107.0</td>
      <td>305994.0</td>
      <td>316101.0</td>
      <td>2017</td>
      <td>NaN</td>
      <td>San Diego</td>
      <td>FT</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Scott Xxxx</td>
      <td>Chief Operating Officer</td>
      <td>255000.0</td>
      <td>0.0</td>
      <td>31164.00</td>
      <td>22688.0</td>
      <td>286164.0</td>
      <td>308852.0</td>
      <td>2017</td>
      <td>NaN</td>
      <td>San Diego</td>
      <td>FT</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>12490</th>
      <td>Stephen Xxxx</td>
      <td>Council Rep 2 A</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>8.00</td>
      <td>0.0</td>
      <td>8.0</td>
      <td>8.0</td>
      <td>2017</td>
      <td>NaN</td>
      <td>San Diego</td>
      <td>PT</td>
    </tr>
    <tr>
      <th>12491</th>
      <td>Tania Xxxx</td>
      <td>Sr Mgmt Anlyst</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>8.00</td>
      <td>0.0</td>
      <td>8.0</td>
      <td>8.0</td>
      <td>2017</td>
      <td>NaN</td>
      <td>San Diego</td>
      <td>PT</td>
    </tr>
    <tr>
      <th>12492</th>
      <td>Brian Xxxx</td>
      <td>Police Officer</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.00</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>2017</td>
      <td>NaN</td>
      <td>San Diego</td>
      <td>PT</td>
    </tr>
  </tbody>
</table>
<p>12493 rows × 12 columns</p>
</div></div></div>
</div>
</div>
<div class="section" id="aside-on-privacy-and-ethics">
<h3>Aside on privacy and ethics<a class="headerlink" href="#aside-on-privacy-and-ethics" title="Permalink to this headline">¶</a></h3>
<p>This dataset contains the full names of city employees; these names correspond to <em>real</em> people. Such information is called <em>PII</em>, which stands for personally identifiable information. In many cases it is illegal to improperly disclose PII. In this case public employees are public figures and it’s not against the law to disclose their names.</p>
<p>However, there is a difference between what is <em>legal</em> and what is <em>ethical</em>. In this case, the difference between ‘public record’ and ‘searchable record’ may have very different impact on someone’s life. Public record exists to give people who want to know a small amount of relevant information the ability to do so. Collecting all public records for a single person in one place creates an intimate picture of that person’s life that may easily cross into invasion of privacy.</p>
<p>The takeaway: there are people behind each data point, and those people’s data should not be needlessly propagated! In this case, the last names of the employees have been blanked out, even though it’s not legally necessary to do so.</p>
</div>
<div class="section" id="basic-description-of-employee-pay">
<h3>Basic description of employee pay<a class="headerlink" href="#basic-description-of-employee-pay" title="Permalink to this headline">¶</a></h3>
<p>The table below contains a basic of description of employee pay. What does typical pay look like? Are there questions about data reliability?</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">salaries</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Base Pay</th>
      <td>12493.0</td>
      <td>48843.853918</td>
      <td>29377.449188</td>
      <td>0.0</td>
      <td>28888.0</td>
      <td>49254.0</td>
      <td>68952.0</td>
      <td>255000.0</td>
    </tr>
    <tr>
      <th>Overtime Pay</th>
      <td>12493.0</td>
      <td>6573.031858</td>
      <td>15308.455700</td>
      <td>-623.0</td>
      <td>0.0</td>
      <td>393.0</td>
      <td>5408.0</td>
      <td>196978.0</td>
    </tr>
    <tr>
      <th>Benefits</th>
      <td>12493.0</td>
      <td>8667.754983</td>
      <td>6456.089561</td>
      <td>-29.0</td>
      <td>2785.0</td>
      <td>8420.0</td>
      <td>13485.0</td>
      <td>36030.0</td>
    </tr>
    <tr>
      <th>Total Pay</th>
      <td>12493.0</td>
      <td>64984.971024</td>
      <td>41812.990357</td>
      <td>3.0</td>
      <td>36430.0</td>
      <td>61452.0</td>
      <td>91400.0</td>
      <td>323377.0</td>
    </tr>
    <tr>
      <th>Total Pay &amp; Benefits</th>
      <td>12493.0</td>
      <td>73652.726007</td>
      <td>45761.462637</td>
      <td>3.0</td>
      <td>44788.0</td>
      <td>71264.0</td>
      <td>103131.0</td>
      <td>328571.0</td>
    </tr>
    <tr>
      <th>Year</th>
      <td>12493.0</td>
      <td>2017.000000</td>
      <td>0.000000</td>
      <td>2017.0</td>
      <td>2017.0</td>
      <td>2017.0</td>
      <td>2017.0</td>
      <td>2017.0</td>
    </tr>
    <tr>
      <th>Notes</th>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>A few of the questions raised by this table of statistics are:</p>
<ul class="simple">
<li><p>What are the negative payments? Near zero salaries?</p></li>
<li><p>Where did the “Other Pay” column go?</p></li>
<li><p>Are the salaries in the ‘max’ column real?</p></li>
<li><p>This dataset only contains one year!</p></li>
</ul>
<p>These descriptive statistics hide a lot of information about the data. However, that over-simplification makes the dataset more understandable. These questions are a starting point for focusing a detailed investigation into the dataset and how well it represents the reality being analyzed.</p>
</div>
<div class="section" id="empirical-distribution-of-salaries">
<h3>Empirical Distribution of Salaries<a class="headerlink" href="#empirical-distribution-of-salaries" title="Permalink to this headline">¶</a></h3>
<p>As employee total pay is the primary attribute of focus, it makes sense to understand how it varies across the entire population of employees. Plotting the empirical distribution of salaries raises two observations:</p>
<ul class="simple">
<li><p>The distribution is ‘bimodal’ and is likely comprised of two distributions.</p></li>
<li><p>The salaries have a skew to the right, which is typical for a quantity that can only be non-negative.</p></li>
</ul>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">salaries</span><span class="p">[</span><span class="s1">&#39;Total Pay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;distribution of Total Salaries&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/data-science-example_10_0.png" src="../../_images/data-science-example_10_0.png" />
</div>
</div>
<p>A reasonable guess for the bimodal nature of the distribution of salaries is the employment status. One would expect salaries to vary significantly based on whether an employee works Part-time versus Full-time. Splitting the population up by job status reveals two distributions:</p>
<ul class="simple">
<li><p>The part-time jobs tend to have lower salaries, closer to 0,</p></li>
<li><p>The full-time jobs tends to have salaries centered around 80,000 USD.</p></li>
</ul>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bystatus</span> <span class="o">=</span> <span class="n">salaries</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Status&#39;</span><span class="p">)</span>
<span class="n">bystatus</span><span class="p">[</span><span class="s1">&#39;Total Pay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;kde&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Salary by Full-time/Part-time&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bystatus</span><span class="o">.</span><span class="n">groups</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/data-science-example_12_0.png" src="../../_images/data-science-example_12_0.png" />
</div>
</div>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">salaries</span> <span class="o">=</span> <span class="n">salaries</span><span class="p">[[</span><span class="s1">&#39;Employee Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Job Title&#39;</span><span class="p">,</span> <span class="s1">&#39;Total Pay&#39;</span><span class="p">,</span> <span class="s1">&#39;Status&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="do-women-earn-similar-pay-to-their-contemporaries">
<h3>Do women earn similar pay to their contemporaries?<a class="headerlink" href="#do-women-earn-similar-pay-to-their-contemporaries" title="Permalink to this headline">¶</a></h3>
<p>With a general assessment of the data finished, a more pointed questions about the data can be pursued. In this case: do employees of different genders have similar pay?</p>
<p>However, this dataset doesn’t contain information on the gender of employees. The dataset does have the first names of employees, which contains imperfect information about gender. A reasonable approach is to find a dataset that contains information about correspondences between names and gender.</p>
<p>In this case, the Social Security Administration publishes a “baby names” dataset that does exactly this.</p>
</div>
<div class="section" id="ssa-names-dataset">
<h3>SSA names dataset<a class="headerlink" href="#ssa-names-dataset" title="Permalink to this headline">¶</a></h3>
<p>The Social Security Administration compiles a list of all names on social security applications in a given year, whether the applicant identified as Male or Female. This list can then be used to label the most likely gender of the employees using their first names.</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">names_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;names.csv&#39;</span><span class="p">)</span>
<span class="n">names</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">names_path</span><span class="p">)</span>
<span class="n">names</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>firstname</th>
      <th>gender</th>
      <th>count</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Emily</td>
      <td>F</td>
      <td>25956</td>
      <td>2000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Hannah</td>
      <td>F</td>
      <td>23082</td>
      <td>2000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Madison</td>
      <td>F</td>
      <td>19968</td>
      <td>2000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Ashley</td>
      <td>F</td>
      <td>17997</td>
      <td>2000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Sarah</td>
      <td>F</td>
      <td>17702</td>
      <td>2000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="basic-check-of-names">
<h3>Basic check of <code class="docutils literal notranslate"><span class="pre">names</span></code>:<a class="headerlink" href="#basic-check-of-names" title="Permalink to this headline">¶</a></h3>
<p>There are a number of details to attend to in SSA dataset:</p>
<ul class="simple">
<li><p>Many names identify to both genders (gender-neutral names).</p></li>
<li><p>Most names occur only a few times per year (most names are rare).</p></li>
<li><p>A few names make up most the applications.</p></li>
</ul>
<p>Notice, the name “Madison” is mostly identified as female, though there are consistently a few males with that name as well:</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># look at a single name</span>
<span class="n">names</span><span class="p">[</span><span class="n">names</span><span class="p">[</span><span class="s1">&#39;firstname&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Madison&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>firstname</th>
      <th>gender</th>
      <th>count</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1887827</th>
      <td>Madison</td>
      <td>M</td>
      <td>36</td>
      <td>2018</td>
    </tr>
    <tr>
      <th>1866629</th>
      <td>Madison</td>
      <td>F</td>
      <td>7036</td>
      <td>2018</td>
    </tr>
    <tr>
      <th>161087</th>
      <td>Madison</td>
      <td>F</td>
      <td>7875</td>
      <td>2017</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1932167</th>
      <td>Madison</td>
      <td>M</td>
      <td>27</td>
      <td>1882</td>
    </tr>
    <tr>
      <th>1843222</th>
      <td>Madison</td>
      <td>M</td>
      <td>28</td>
      <td>1881</td>
    </tr>
    <tr>
      <th>1841285</th>
      <td>Madison</td>
      <td>M</td>
      <td>22</td>
      <td>1880</td>
    </tr>
  </tbody>
</table>
<p>178 rows × 4 columns</p>
</div></div></div>
</div>
</div>
<div class="section" id="approach-to-joining-gender">
<h3>Approach to joining gender:<a class="headerlink" href="#approach-to-joining-gender" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Create a table of distinct names with the proportion of applications on which that name identifies as female.</p></li>
<li><p>That is, for each name <span class="math notranslate nohighlight">\(N\)</span>, compute:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[P({\rm person\ is\ female\ }|{\rm \ person\ has\ first\ name\ } N)\]</div>
<ul class="simple">
<li><p>Join this table to the salaries dataset.</p></li>
</ul>
<p>First, creating the table of counts of gender for each name over every year:</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Counts by gender</span>
<span class="n">cnts_by_gender</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;firstname&#39;</span><span class="p">,</span> 
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">],</span> 
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> 
    <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> 
    <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span>
<span class="p">)</span>

<span class="n">names_idx</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Aaron&#39;</span><span class="p">,</span> <span class="s1">&#39;Maria&#39;</span><span class="p">,</span> <span class="s1">&#39;Dakota&#39;</span><span class="p">,</span> <span class="s1">&#39;Ashley&#39;</span><span class="p">,</span> <span class="s1">&#39;Avery&#39;</span><span class="p">,</span> <span class="s1">&#39;Paris&#39;</span><span class="p">]</span>
<span class="n">cnts_by_gender</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">names_idx</span><span class="p">,</span> <span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>gender</th>
      <th>F</th>
      <th>M</th>
    </tr>
    <tr>
      <th>firstname</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Aaron</th>
      <td>4307</td>
      <td>581330</td>
    </tr>
    <tr>
      <th>Maria</th>
      <td>546026</td>
      <td>4237</td>
    </tr>
    <tr>
      <th>Dakota</th>
      <td>33204</td>
      <td>86089</td>
    </tr>
    <tr>
      <th>Ashley</th>
      <td>846120</td>
      <td>15668</td>
    </tr>
    <tr>
      <th>Avery</th>
      <td>125883</td>
      <td>55646</td>
    </tr>
    <tr>
      <th>Paris</th>
      <td>28841</td>
      <td>8812</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>From the total counts in the above table, calculate the proportion of a given name that’s identified as female. If this number is greater than 0.5, then the name is likely associated to female; otherwise the name mostly associates to male.</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># proportion of a given name that&#39;s identified female</span>
<span class="n">prop_female</span> <span class="o">=</span> <span class="p">(</span><span class="n">cnts_by_gender</span><span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">cnts_by_gender</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="n">genders</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">prop_female</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;proportion of a given name that</span><span class="se">\&#39;</span><span class="s1">s identified as female&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> 
               <span class="n">prop_female</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="s1">&#39;F&#39;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mf">0.5</span> <span class="k">else</span> <span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;prop_female&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
              <span class="p">}))</span>

<span class="n">genders</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">names_idx</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="add-a-given-name-column-to-salaries-and-join-names">
<h3>Add a given name column to <code class="docutils literal notranslate"><span class="pre">salaries</span></code> and join names<a class="headerlink" href="#add-a-given-name-column-to-salaries-and-join-names" title="Permalink to this headline">¶</a></h3>
<p>This table of names and their most likely gender attaches a ‘most likely gender’ to the employees in the salaries dataset. This identification is approximate and doesn’t reflect the actual gender with which the employees identify.</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add firstname column</span>
<span class="n">salaries</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;firstname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">salaries</span><span class="p">[</span><span class="s1">&#39;Employee Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># join gender</span>
<span class="n">salaries_with_gender</span> <span class="o">=</span> <span class="n">salaries</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">genders</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;firstname&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
<span class="n">salaries_with_gender</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Employee Name</th>
      <th>Job Title</th>
      <th>Total Pay</th>
      <th>Status</th>
      <th>firstname</th>
      <th>proportion of a given name that's identified as female</th>
      <th>gender</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Leonardo Xxxx</td>
      <td>Library Clerk</td>
      <td>43336.0</td>
      <td>FT</td>
      <td>Leonardo</td>
      <td>0.001915</td>
      <td>M</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Reina Xxxx</td>
      <td>Accountant 3</td>
      <td>77461.0</td>
      <td>FT</td>
      <td>Reina</td>
      <td>1.000000</td>
      <td>F</td>
    </tr>
    <tr>
      <th>2</th>
      <td>La Xxxx</td>
      <td>Info Sys Anlyst 3</td>
      <td>72983.0</td>
      <td>FT</td>
      <td>La</td>
      <td>0.824943</td>
      <td>F</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Montserrat Xxxx</td>
      <td>Pool Guard 1</td>
      <td>8476.0</td>
      <td>PT</td>
      <td>Montserrat</td>
      <td>1.000000</td>
      <td>F</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Serena Xxxx</td>
      <td>Program Manager</td>
      <td>122884.0</td>
      <td>FT</td>
      <td>Serena</td>
      <td>0.999616</td>
      <td>F</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="id1">
<h3>Do women earn similar pay to their contemporaries?<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>With a most likely gender attached to the salaries dataset, the salaries can now be described by gender:</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span>
    <span class="n">salaries_with_gender</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;gender&#39;</span><span class="p">)[</span><span class="s1">&#39;Total Pay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
    <span class="n">salaries_with_gender</span><span class="p">[</span><span class="s1">&#39;Total Pay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;All&#39;</span><span class="p">)</span>
<span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>F</th>
      <th>M</th>
      <th>All</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>4165.000000</td>
      <td>7907.000000</td>
      <td>12493.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>53970.997119</td>
      <td>71226.907550</td>
      <td>64984.971024</td>
    </tr>
    <tr>
      <th>std</th>
      <td>36251.189372</td>
      <td>43419.913446</td>
      <td>41812.990357</td>
    </tr>
    <tr>
      <th>min</th>
      <td>8.000000</td>
      <td>3.000000</td>
      <td>3.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>25853.000000</td>
      <td>41557.500000</td>
      <td>36430.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>50789.000000</td>
      <td>67874.000000</td>
      <td>61452.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>75128.000000</td>
      <td>100689.000000</td>
      <td>91400.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>237512.000000</td>
      <td>323377.000000</td>
      <td>323377.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>There is clearly a large difference in salaries between the males and females! This observation brings up a variety of questions:</p>
<ul class="simple">
<li><p>Is this difference the result of some sort of true unfairness, or perhaps the difference is just due to chance?</p></li>
<li><p>If the difference isn’t due to chance, <em>why</em> does it exist?</p></li>
</ul>
</div>
<div class="section" id="use-a-hypothesis-test">
<h3>Use a hypothesis test<a class="headerlink" href="#use-a-hypothesis-test" title="Permalink to this headline">¶</a></h3>
<p>Another way of phrasing the question “Is this difference the result of some sort of true unfairness, or perhaps the difference is just due to chance?” is as</p>
<blockquote>
<div><p>Can women’s median pay be explained as a random subset of the population of city of SD salaries?</p>
</div></blockquote>
<p>If so, the salary of women doesn’t significantly differ from the population; otherwise, some other mechanism is needed to explain the difference!</p>
<p>Hypothesis tests answer these sorts of questions. In particular, such a question can be simulated:</p>
<ul class="simple">
<li><p>Random subsets of employees are drawn from the dataset, of the same size as the number of female employees,</p></li>
<li><p>The median salary of each of these random groups is calculated,</p></li>
<li><p>The observed salary of female employees is compared to the simulated ‘randomly drawn’ median salaries.
Finally, one asks if the observed, real-life salary was just as likely drawn from a random subset of employees. If so, then the observed difference may have occurred due to chance; otherwise, something else is going on!</p></li>
</ul>
<p>The plot below illustrates the results of this simulation:</p>
<ul class="simple">
<li><p>The blue distribution represents the median salaries of these ‘randomly formed groups’.</p></li>
<li><p>The orange dot represents the real-life median female salary.</p></li>
</ul>
<p>It seems unlikely this difference is due to chance!</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># size of sample is number of women:</span>
<span class="n">n_female</span> <span class="o">=</span> <span class="p">(</span><span class="n">salaries_with_gender</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;F&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>


<span class="c1"># calculate observed </span>
<span class="n">female_median</span> <span class="o">=</span> <span class="n">salaries_with_gender</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">salaries_with_gender</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;F&#39;</span><span class="p">][</span><span class="s1">&#39;Total Pay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>


<span class="c1"># simulate 1000 draws from the population of size n_female</span>
<span class="n">medians</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">median</span> <span class="o">=</span> <span class="n">salaries_with_gender</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n_female</span><span class="p">)[</span><span class="s1">&#39;Total Pay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
    <span class="n">medians</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">median</span><span class="p">)</span>
    
    
<span class="n">title</span><span class="o">=</span><span class="s1">&#39;Median salary of randomly chosen groups from population&#39;</span>
<span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">medians</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">female_median</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Observed Median Salary of Women&#39;</span><span class="p">,</span> <span class="s1">&#39;Median Salaries of Random Groups&#39;</span><span class="p">]);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="truism-of-data-science">
<h2>Truism of data science<a class="headerlink" href="#truism-of-data-science" title="Permalink to this headline">¶</a></h2>
<p>Now that the question of differences in the salaries of genders is answered, a truism of data science rears its head: answering one question always raises a dozen more.</p>
<p>First, are the results correct?</p>
<ul class="simple">
<li><p>Is dataset error-free and representative (or error-free enough)?</p></li>
<li><p>Is the name-to-gender assignment correct (enough)?</p></li>
<li><p>What biases might have been introduced when joining the dataset of names to salaries?</p></li>
<li><p>Are the results applicable outside of 2017? outside of San Diego?</p></li>
</ul>
<p>Second, why are the results what they are?</p>
<ul class="simple">
<li><p>Is the disparity correlated to pay-type? job status? job type?</p></li>
<li><p>What is the cause of the disparity?</p></li>
</ul>
<p>The sections below approach each of these questions, giving a feel for what’s involved in answering them.</p>
<div class="section" id="is-the-dataset-representative">
<h3>Is the dataset representative?<a class="headerlink" href="#is-the-dataset-representative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Look up the “transparent California” and verify this dataset is a <em>census</em> (everyone).</p></li>
<li><p>Is “Total Pay” the most appropriate field to use?</p></li>
<li><p>Cross-reference independent counts of city of San Diego employees to assess the salary data.</p></li>
<li><p>What is the population of interest? Is it San Diego employees in 2017, or something more broad?</p></li>
</ul>
</div>
<div class="section" id="is-the-name-to-gender-assignment-correct">
<h3>Is the name-to-gender assignment correct?<a class="headerlink" href="#is-the-name-to-gender-assignment-correct" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>How many names are borderline male/female?</p></li>
<li><p>Does it make sense to incorporate name usage from all years in the dataset? (1880-2017?)</p></li>
</ul>
<p>The plot below shows the distribution of ‘proportions of names being female.’</p>
<ul class="simple">
<li><p>The bar near 0 are counts of names that are almost entirely male.</p></li>
<li><p>The bar near 1 are counts of names that are almost entirely female.</p></li>
<li><p>There are very few names in the middle that are gender-neutral.</p></li>
</ul>
<p>However, each unit plotted is a distinct name; the proportions hide the number of people with each name. What if the most popular name in the country is gender-neutral? This distribution doesn’t reveal this property and is an example of what’s called an <em>Ecological Fallacy</em> (see the chapter on grouping and aggregation).</p>
<p>What’s more appropriate is to look at this distribution of confidence among the dataset of employees.</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;distribution of gendered-ness of names</span><span class="se">\n</span><span class="s1"> 0 = masculine </span><span class="se">\n</span><span class="s1"> 1 = feminine&#39;</span>
<span class="n">prop_female</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/data-science-example_33_0.png" src="../../_images/data-science-example_33_0.png" />
</div>
</div>
</div>
<div class="section" id="assessment-of-the-join">
<h3>Assessment of the join?<a class="headerlink" href="#assessment-of-the-join" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Are there names in the salary dataset that aren’t in the SSA dataset?</p>
<ul>
<li><p>Who might not be in the SSA dataset?</p></li>
<li><p>Might these names be biased toward certain salaries?</p></li>
</ul>
</li>
<li><p>Does the salary dataset have a disproportionately large portion of gender-neutral names.</p></li>
<li><p>Is it better to use a subset of the SSA dataset (e.g. by state? by year?)</p>
<ul>
<li><p>Do the gender of names typically vary by geography or over time?</p></li>
</ul>
</li>
</ul>
<p>The proportion of employees not in the SSA data is 3.5%, which is fairly small, but may affect the results. These individuals should be investigated more closely; a look at the employees with a gender assigned versus those that didn’t appear in the SSA names dataset reveals some bias (see table below).</p>
<p>Perhaps those that didn’t appear in the names dataset have lower salaries because they belong to an uncommon ethnic group (e.g. an immigrant group)? Such populations would likely work in jobs that earn lower salaries. One could further clean up these missing genders by incorporating the demographic information from immigration data.</p>
<p>These problems centered around bias from missing data are covered in the ‘Missing Data’ chapter of the book.</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># proportion of employees not in SSA dataset</span>
<span class="c1"># salaries_with_gender[&#39;gender&#39;].isnull().mean()</span>

<span class="c1"># Description of total pay by joined vs not joined</span>
<span class="p">(</span>
    <span class="n">salaries_with_gender</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">joined</span><span class="o">=</span><span class="n">salaries_with_gender</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">())</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;joined&#39;</span><span class="p">)[</span><span class="s1">&#39;Total Pay&#39;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">describe</span><span class="p">()</span>
    <span class="o">.</span><span class="n">T</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>joined</th>
      <th>False</th>
      <th>True</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>421.000000</td>
      <td>12072.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>56714.684086</td>
      <td>65273.389745</td>
    </tr>
    <tr>
      <th>std</th>
      <td>38445.038529</td>
      <td>41897.581538</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>54966.000000</td>
      <td>61653.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>78376.000000</td>
      <td>91895.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>194920.000000</td>
      <td>323377.000000</td>
    </tr>
  </tbody>
</table>
<p>8 rows × 2 columns</p>
</div></div></div>
</div>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nonjoins</span> <span class="o">=</span> <span class="n">salaries_with_gender</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">salaries_with_gender</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()]</span>

<span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Distribution of Salaries&#39;</span>
<span class="n">nonjoins</span><span class="p">[</span><span class="s1">&#39;Total Pay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">salaries_with_gender</span><span class="p">[</span><span class="s1">&#39;Total Pay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Not in SSA&#39;</span><span class="p">,</span><span class="s1">&#39;All&#39;</span><span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/data-science-example_36_0.png" src="../../_images/data-science-example_36_0.png" />
</div>
</div>
</div>
<div class="section" id="why-does-pay-disparity-exist">
<h3>Why does pay disparity exist?<a class="headerlink" href="#why-does-pay-disparity-exist" title="Permalink to this headline">¶</a></h3>
<p>Is the pay disparity correlated to another field? job status? job type? Is the proportion of women in a job type correlated to pay? One approach might ask if women earn similar salaries as men for a given job type.</p>
<p>Below, a few job types are isolated for investigation. For example, those who work in ‘Fire’ related fields tend to be male and make high salaries:</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># select jobs with word &#39;fire&#39; in them</span>
<span class="n">firejobs</span> <span class="o">=</span> <span class="n">salaries_with_gender</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">salaries_with_gender</span><span class="p">[</span><span class="s1">&#39;Job Title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Fire&#39;</span><span class="p">)]</span>
<span class="n">firejobs</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Employee Name</th>
      <th>Job Title</th>
      <th>Total Pay</th>
      <th>Status</th>
      <th>firstname</th>
      <th>proportion of a given name that's identified as female</th>
      <th>gender</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>342</th>
      <td>Michael Xxxx</td>
      <td>Fire Engineer</td>
      <td>150291.0</td>
      <td>PT</td>
      <td>Michael</td>
      <td>0.004957</td>
      <td>M</td>
    </tr>
    <tr>
      <th>555</th>
      <td>Dustin Xxxx</td>
      <td>Fire Fighter 2</td>
      <td>134974.0</td>
      <td>FT</td>
      <td>Dustin</td>
      <td>0.006679</td>
      <td>M</td>
    </tr>
    <tr>
      <th>12027</th>
      <td>Chase Xxxx</td>
      <td>Fire Fighter 2</td>
      <td>3900.0</td>
      <td>PT</td>
      <td>Chase</td>
      <td>0.021086</td>
      <td>M</td>
    </tr>
    <tr>
      <th>5718</th>
      <td>Nick Xxxx</td>
      <td>Fire Dispatch Supv</td>
      <td>62799.0</td>
      <td>FT</td>
      <td>Nick</td>
      <td>0.002659</td>
      <td>M</td>
    </tr>
    <tr>
      <th>2627</th>
      <td>Dave Xxxx</td>
      <td>Fire Engineer</td>
      <td>91446.0</td>
      <td>FT</td>
      <td>Dave</td>
      <td>0.001780</td>
      <td>M</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The proportion of fire-related jobs held by women is only 8.8%, yet fire-related jobs make significantly more than the overall median pay of 61,000USD per year:</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Proportion of fire-related jobs held by women</span>
<span class="c1">#(firejobs[&#39;gender&#39;] == &#39;F&#39;).mean()</span>

<span class="c1"># Pay Statistics for fire-related jobs</span>
<span class="n">firejobs</span><span class="p">[</span><span class="s1">&#39;Total Pay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count      1017.000000
mean     110967.646018
std       49678.113970
             ...      
50%      112568.000000
75%      141502.000000
max      323377.000000
Name: Total Pay, Length: 8, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>On the other hand, those with library-related jobs tend to be female and make lower-than-average salaries:</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># select jobs with library related jobs</span>
<span class="n">libjobs</span> <span class="o">=</span> <span class="n">salaries_with_gender</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">salaries_with_gender</span><span class="p">[</span><span class="s1">&#39;Job Title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Librar&#39;</span><span class="p">)]</span>
<span class="n">libjobs</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Employee Name</th>
      <th>Job Title</th>
      <th>Total Pay</th>
      <th>Status</th>
      <th>firstname</th>
      <th>proportion of a given name that's identified as female</th>
      <th>gender</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5955</th>
      <td>Patricia Xxxx</td>
      <td>Librarian 2</td>
      <td>63320.0</td>
      <td>FT</td>
      <td>Patricia</td>
      <td>0.996853</td>
      <td>F</td>
    </tr>
    <tr>
      <th>10363</th>
      <td>Joseph Xxxx</td>
      <td>Library Aide</td>
      <td>17777.0</td>
      <td>PT</td>
      <td>Joseph</td>
      <td>0.004060</td>
      <td>M</td>
    </tr>
    <tr>
      <th>11194</th>
      <td>Jaqueline Xxxx</td>
      <td>Library Aide</td>
      <td>10189.0</td>
      <td>PT</td>
      <td>Jaqueline</td>
      <td>0.998469</td>
      <td>F</td>
    </tr>
    <tr>
      <th>8706</th>
      <td>Alexis Xxxx</td>
      <td>Library Clerk</td>
      <td>39696.0</td>
      <td>FT</td>
      <td>Alexis</td>
      <td>0.841756</td>
      <td>F</td>
    </tr>
    <tr>
      <th>8430</th>
      <td>Steven Xxxx</td>
      <td>Library Clerk</td>
      <td>43056.0</td>
      <td>FT</td>
      <td>Steven</td>
      <td>0.003469</td>
      <td>M</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The proportion of library-related jobs held by women is 64%, yet library related jobs make significantly less than the overall median salary:</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Proportion of library-related jobs held by women</span>
<span class="c1">#(libjobs[&#39;gender&#39;] == &#39;F&#39;).mean()</span>

<span class="c1"># Pay Statistics for fire-related jobs</span>
<span class="n">libjobs</span><span class="p">[</span><span class="s1">&#39;Total Pay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count       651.000000
mean      30383.377880
std       23236.318495
min          23.000000
25%       10598.500000
50%       26952.000000
75%       43566.000000
max      167269.000000
Name: Total Pay, dtype: float64
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="what-is-the-cause-of-the-disparity">
<h3>What is the cause of the disparity?<a class="headerlink" href="#what-is-the-cause-of-the-disparity" title="Permalink to this headline">¶</a></h3>
<p>Now that the picture of employee salaries is better understood the next steps all consist of domain more research:</p>
<ul class="simple">
<li><p>Research historical gender preferences across jobs</p></li>
<li><p>list possibilities and formulate hypothesis for a cause,</p></li>
<li><p>find data capable of describing these possibilities,</p></li>
<li><p>use a <a class="reference external" href="https://en.wikipedia.org/wiki/Natural_experiment">natural experiment</a> to argue causality.</p></li>
</ul>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/01"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="scientific-method.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Models and the Scientific Method</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../02/introduction.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">The Basics of Tabular Data</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Aaron Fraenkel<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>